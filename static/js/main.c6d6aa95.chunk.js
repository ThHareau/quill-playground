(this["webpackJsonpquill-playground"]=this["webpackJsonpquill-playground"]||[]).push([[0],{170:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),i=a.n(l),u=(a(63),a(7)),c=(a(64),a(1)),o=a.n(c),s=a(2),m=a(4),f=a(11),b=a(3),v=a(12),d=a(10),h=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"create",value:function(e){var t=Object(f.a)(Object(b.a)(a),"create",this).call(this,e);return t.contentEditable="false",t}}]),a}(c.Quill.import("blots/inline"));h.blotName="highlight",h.className="ql-highlight",h.tagName="mark";var p=h,E=function(){function e(t){Object(s.a)(this,e),this.quill=t}return Object(m.a)(e,[{key:"findMatches",value:function(e){var t=this.quill.getText(),a=RegExp(e,"gi");return Array.from(t.matchAll(a)).map((function(e){return{index:e.index,length:e[0].length}}))}},{key:"search",value:function(e){var t=this;e&&this.findMatches(e).forEach((function(e){var a=e.index,n=e.length;t.quill.formatText(a,n,"highlight",!0)}))}}]),e}();c.Quill.register("modules/searcher",E),c.Quill.register(p);var g=["bold","list","italic","highlight"],O=function(e){var t=e.text,a=e.search,l=Object(n.useRef)();return Object(n.useEffect)((function(){var e;(null===(e=l.current)||void 0===e?void 0:e.getEditor()).getModule("searcher").search(a)}),[a]),r.a.createElement(o.a,{ref:l,value:t,readOnly:!0,theme:null,formats:g,modules:{searcher:!0}})},j=a(8),y=function(e){var t=e.name,a=e.value,n=e.onValueNameChange;return r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("label",{style:{flex:1},htmlFor:t},t,": "),r.a.createElement("input",{type:"text",value:a,style:{flex:2},id:t,onChange:function(e){var t=e.target.value;return n(t)}}))},N=function(e){var t=e.variables,a=e.setVariables,n=function(e,n){a(t.map((function(t){return t.name===e?Object(j.a)(Object(j.a)({},t),{},{name:e},n):t})))};return r.a.createElement("form",null,t.map((function(e){var t=e.name,a=e.value,l=e.displayName;return r.a.createElement(y,{name:t,value:a,key:t,displayName:l,onDisplayNameChange:function(e){return n(t,{value:a,displayName:e})},onValueNameChange:function(e){return n(t,{displayName:l,value:e})}})})))};a(57),a(170);window.translations||(window.translations={"last-name":"Nom","first-name":"Pr\xe9nom"});var w=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"create",value:function(e){var t,n,r=Object(f.a)(Object(b.a)(a),"create",this).call(this,e);return Object.keys(e).forEach((function(t){r.setAttribute("data-".concat(t),e[t])})),r.innerText=(t=e.name,window.translations[t]||(null==n?t:n)),r}},{key:"value",value:function(e){return{name:e.getAttribute("data-name")}}}]),a}(c.Quill.import("blots/embed"));w.blotName="variable",w.tagName="span",w.className="ql-variable";var x=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"create",value:function(e){var t=Object(f.a)(Object(b.a)(a),"create",this).call(this,e),n=e.name,r=e.displayName;return t.setAttribute("data-name",n),t.setAttribute("data-display-name",r),t.innerText=r,t}},{key:"value",value:function(e){var t=function(t){return e.getAttribute("data-".concat(t))};return{name:t("name"),displayName:t("display-name")}}}]),a}(c.Quill.import("blots/embed"));x.blotName="input",x.tagName="span",x.className="ql-input";var k=c.Quill.import("parchment"),S=function e(t,a){Object(s.a)(this,e),t.root.addEventListener("click",(function(e){var n,r=k.find(e.target,!0);if(null===(n=a.blots)||void 0===n?void 0:n.find((function(e){return r instanceof e})))switch(a.action){case"right":return t.setSelection(r.offset(t.scroll)+1,c.Quill.sources.USER);case"select":default:return t.setSelection(r.offset(t.scroll),1,c.Quill.sources.USER)}}))};c.Quill.register("blots/embed",w),c.Quill.register("blots/embed",x),c.Quill.register("modules/embedSelector",S);var Q=["variable","bold","input","list","header"],C=Object(n.forwardRef)((function(e,t){var a=e.text,l=e.onChange,i=Object(n.useRef)(),u=function(e){return function(t){var a=i.current.getEditor(),n=a.getSelection(!0);a.insertEmbed(n.index,e,t,c.Quill.sources.USER),a.setSelection(n.index+1,c.Quill.sources.SILENT)}};return Object(n.useImperativeHandle)(t,(function(){return{variable:u("variable"),input:u("input")}})),r.a.createElement(o.a,{theme:"snow",value:a,onChange:l,formats:Q,ref:i,modules:{embedSelector:{blots:[x,w],action:"right"}}})})),R=function(){function e(t){var a=this;Object(s.a)(this,e),this.quill=t,t.keyboard.bindings[9].unshift({key:9,handler:function(e){var n=e.index,r=e.length,l=a.findNextBlotOfType([x],n+r+1);return!l||(t.setSelection(l.offset(t.scroll),1,c.Quill.sources.USER),!1)}})}return Object(m.a)(e,[{key:"findNextBlotOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.quill.getLeaf(t),n=Object(u.a)(a,1),r=n[0];return r?e.find((function(e){return r instanceof e}))?r:this.findNextBlotOfType(e,t+1):r}}]),e}(),q=function(e,t){var a;return(null===(a=t.find((function(t){return t.name===e})))||void 0===a?void 0:a.value)||"[NODEF ".concat(e,"]")},T=function(e,t){var a=e.ops;return Object(j.a)(Object(j.a)({},e),{},{ops:a.map((function(e){return function(e,t){if(!e.insert)return e;var a=e.insert;return a.variable?Object(j.a)(Object(j.a)({},e),{},{insert:q(a.variable.name,t)}):e}(e,t)}))})};c.Quill.register("blots/embed",w),c.Quill.register("blots/embed",x),c.Quill.register("modules/embedSelector",S),c.Quill.register("modules/tabNavigator",R);var V=["variable","bold","input","list","header"],A=function(e){var t=e.text,a=e.onChange,l=e.template,i=e.variables,s=Object(n.useRef)(),m=Object(n.useState)(!0),f=Object(u.a)(m,2),b=f[0],v=f[1];return Object(n.useEffect)((function(){a(l),v(!0)}),[l,a,i]),Object(n.useEffect)((function(){if(b&&s.current){var e=s.current.getEditor(),t=e.getContents(),a=T(t,i);v(!1),e.setContents(a,c.Quill.sources.API)}}),[t,b,i]),r.a.createElement(o.a,{theme:"snow",value:t,onChange:a,formats:V,ref:s,modules:{embedSelector:{blots:[x],action:"select"},tabNavigator:{blots:[x]}}})},I=function(e){var t=e.variables,a=e.onVariableClicked;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Variables"),t.filter((function(e){return!!e.value})).map((function(e){return r.a.createElement("button",{type:"button",key:e.name,onClick:function(){return a(e)}},e.name)})))},D=function(e){var t=e.onInputClicked;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Inputs"),r.a.createElement("button",{type:"button",onClick:function(){var e=prompt("Display name of your input?"),a=Date.now();t({displayName:e,name:a})}},"New input"))},B=function(){var e,t=Object(n.useRef)(),a=Object(n.useState)([{name:"last-name",value:"Doe"},{name:"first-name",value:"Joan"}]),l=Object(u.a)(a,2),i=l[0],c=l[1],o=Object(n.useState)(""),s=Object(u.a)(o,2),m=s[0],f=s[1],b=Object(n.useState)(m),v=Object(u.a)(b,2),d=v[0],h=v[1],p=Object(n.useState)(""),E=Object(u.a)(p,2),g=E[0],j=E[1];return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"variableEditorView"},r.a.createElement(N,{variables:i,setVariables:c})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"templateView"},r.a.createElement("h3",null,"Quill"),r.a.createElement(C,{text:m,onChange:f,ref:t})),r.a.createElement("div",{className:"row column variableView"},r.a.createElement(I,{variables:i,onVariableClicked:function(e){return t.current.variable(e)}}),r.a.createElement(D,{onInputClicked:null===(e=t.current)||void 0===e?void 0:e.input}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"viewer"},r.a.createElement("h2",null,"Result"),r.a.createElement("div",null,r.a.createElement(A,{template:m,text:d,onChange:h,variables:i}))),r.a.createElement("div",{className:"viewer"},r.a.createElement("h2",null,"Rich text viewer"),r.a.createElement("input",{placeholder:"Search a word",onChange:function(e){var t=e.target.value;return j(t)},value:g}),r.a.createElement("div",null,r.a.createElement(O,{text:d,search:g})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"viewer"},r.a.createElement("h2",null,"Text result"),r.a.createElement("div",null,d)),r.a.createElement("div",{className:"viewer"},r.a.createElement("h2",null,"Template result"),r.a.createElement("div",null,m))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a(171)},63:function(e,t,a){},64:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.c6d6aa95.chunk.js.map