(this["webpackJsonpquill-playground"]=this["webpackJsonpquill-playground"]||[]).push([[0],{170:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(34),i=a.n(r),u=(a(63),a(6)),c=(a(64),a(7)),o=function(e){var t=e.name,a=e.value,n=e.onValueNameChange;return l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement("label",{style:{flex:1},htmlFor:t},t,": "),l.a.createElement("input",{type:"text",value:a,style:{flex:2},id:t,onChange:function(e){var t=e.target.value;return n(t)}}))},s=function(e){var t=e.variables,a=e.setVariables,n=function(e,n){a(t.map((function(t){return t.name===e?Object(c.a)(Object(c.a)({},t),{},{name:e},n):t})))};return l.a.createElement("form",null,t.map((function(e){var t=e.name,a=e.value,r=e.displayName;return l.a.createElement(o,{name:t,value:a,key:t,displayName:r,onDisplayNameChange:function(e){return n(t,{value:a,displayName:e})},onValueNameChange:function(e){return n(t,{displayName:r,value:e})}})})))},m=a(1),b=a.n(m),f=(a(57),a(170),a(5)),v=a(9),d=a(24),p=a(4),E=a(25),h=a(23);window.translations||(window.translations={"last-name":"Nom","first-name":"Pr\xe9nom"});var O=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,null,[{key:"create",value:function(e){var t,n,l=Object(d.a)(Object(p.a)(a),"create",this).call(this,e);return Object.keys(e).forEach((function(t){l.setAttribute("data-".concat(t),e[t])})),l.innerText=(t=e.name,window.translations[t]||(null==n?t:n)),l}},{key:"value",value:function(e){return{name:e.getAttribute("data-name")}}}]),a}(m.Quill.import("blots/embed"));O.blotName="variable",O.tagName="span",O.className="ql-variable";var g=function(e){Object(E.a)(a,e);var t=Object(h.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,null,[{key:"create",value:function(e){var t=Object(d.a)(Object(p.a)(a),"create",this).call(this,e),n=e.name,l=e.displayName;return t.setAttribute("data-name",n),t.setAttribute("data-display-name",l),t.innerText=l,t}},{key:"value",value:function(e){var t=function(t){return e.getAttribute("data-".concat(t))};return{name:t("name"),displayName:t("display-name")}}}]),a}(m.Quill.import("blots/embed"));g.blotName="input",g.tagName="span",g.className="ql-input";var j=m.Quill.import("parchment"),y=function e(t,a){Object(f.a)(this,e),t.root.addEventListener("click",(function(e){var n,l=j.find(e.target,!0);if(null===(n=a.blots)||void 0===n?void 0:n.find((function(e){return l instanceof e})))switch(a.action){case"right":return t.setSelection(l.offset(t.scroll)+1,m.Quill.sources.USER);case"select":default:return t.setSelection(l.offset(t.scroll),1,m.Quill.sources.USER)}}))};m.Quill.register("blots/embed",O),m.Quill.register("blots/embed",g),m.Quill.register("modules/embedSelector",y);var N=["variable","bold","input","list"],k=Object(n.forwardRef)((function(e,t){var a=e.text,r=e.onChange,i=Object(n.useRef)(),u=function(e){return function(t){var a=i.current.getEditor(),n=a.getSelection(!0);a.insertEmbed(n.index,e,t,m.Quill.sources.USER),a.setSelection(n.index+1,m.Quill.sources.SILENT)}};return Object(n.useImperativeHandle)(t,(function(){return{variable:u("variable"),input:u("input")}})),l.a.createElement(b.a,{theme:"snow",value:a,onChange:r,formats:N,ref:i,modules:{embedSelector:{blots:[g,O],action:"right"}}})})),w=function(){function e(t){var a=this;Object(f.a)(this,e),this.quill=t,t.keyboard.bindings[9].unshift({key:9,handler:function(e){var n=e.index,l=e.length,r=a.findNextBlotOfType([g],n+l+1);return!r||(t.setSelection(r.offset(t.scroll),1,m.Quill.sources.USER),!1)}})}return Object(v.a)(e,[{key:"findNextBlotOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.quill.getLeaf(t),n=Object(u.a)(a,1),l=n[0];return l?e.find((function(e){return l instanceof e}))?l:this.findNextBlotOfType(e,t+1):l}}]),e}(),S=function(e,t){var a;return(null===(a=t.find((function(t){return t.name===e})))||void 0===a?void 0:a.value)||"[NODEF ".concat(e,"]")},x=function(e,t){var a=e.ops;return Object(c.a)(Object(c.a)({},e),{},{ops:a.map((function(e){return function(e,t){if(!e.insert)return e;var a=e.insert;return a.variable?Object(c.a)(Object(c.a)({},e),{},{insert:S(a.variable.name,t)}):e}(e,t)}))})};m.Quill.register("blots/embed",O),m.Quill.register("blots/embed",g),m.Quill.register("modules/embedSelector",y),m.Quill.register("modules/tabNavigator",w);var C=["variable","bold","input","list"],Q=function(e){var t=e.text,a=e.onChange,r=e.template,i=e.variables,c=Object(n.useRef)(),o=Object(n.useState)(!0),s=Object(u.a)(o,2),f=s[0],v=s[1];return Object(n.useEffect)((function(){a(r),v(!0)}),[r,a,i]),Object(n.useEffect)((function(){if(f&&c.current){var e=c.current.getEditor(),t=e.getContents(),a=x(t,i);v(!1),e.setContents(a,m.Quill.sources.API)}}),[t,f,i]),l.a.createElement(b.a,{theme:"snow",value:t,onChange:a,formats:C,ref:c,modules:{embedSelector:{blots:[g],action:"select"},tabNavigator:{blots:[g]}}})},V=function(e){var t=e.variables,a=e.onVariableClicked;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Variables"),t.filter((function(e){return!!e.value})).map((function(e){return l.a.createElement("button",{type:"button",key:e.name,onClick:function(){return a(e)}},e.name)})))},R=function(e){var t=e.onInputClicked;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Inputs"),l.a.createElement("button",{type:"button",onClick:function(){var e=prompt("Display name of your input?"),a=Date.now();t({displayName:e,name:a})}},"New input"))},I=function(){var e,t=Object(n.useRef)(),a=Object(n.useState)([{name:"last-name",value:"Doe"},{name:"first-name",value:"Joan"}]),r=Object(u.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)(""),m=Object(u.a)(o,2),b=m[0],f=m[1],v=Object(n.useState)(b),d=Object(u.a)(v,2),p=d[0],E=d[1];return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"variableEditorView"},l.a.createElement(s,{variables:i,setVariables:c})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"templateView"},l.a.createElement("h3",null,"Quill"),l.a.createElement(k,{text:b,onChange:f,ref:t})),l.a.createElement("div",{className:"row column variableView"},l.a.createElement(V,{variables:i,onVariableClicked:function(e){return t.current.variable(e)}}),l.a.createElement(R,{onInputClicked:null===(e=t.current)||void 0===e?void 0:e.input}))),l.a.createElement("div",null,l.a.createElement("h2",null,"Result"),l.a.createElement("div",null,l.a.createElement(Q,{template:b,text:p,onChange:E,variables:i}))),l.a.createElement("div",null,l.a.createElement("h2",null,"Text result"),l.a.createElement("div",null,p)),l.a.createElement("div",null,l.a.createElement("h2",null,"Template result"),l.a.createElement("div",null,b)))};i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a(171)},63:function(e,t,a){},64:function(e,t,a){}},[[58,1,2]]]);
//# sourceMappingURL=main.db058e50.chunk.js.map